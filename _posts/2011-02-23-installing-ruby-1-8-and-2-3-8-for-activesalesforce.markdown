---
layout: post
title:  Installing Ruby 1.8 and & 2.3.8 for ActiveSalesforce
description: Ive been working for the past week or two on my Ruby for Force.com Developers  series but have run into a few snags. First of all the ActiveSalesforce  adapter doesnt work with Rails 3.0.3. Theres a post on the message boards where Quinton Wall mentions that he is working with Heroku and is looking to write a new Ruby toolkit. Any new toolkit will be REST-based and move away from the active-record model but no ETA as of now. So my other alternative was to go the REST route since Ive already done
date: 2011-02-23 12:31:52 +0300
image:  '/images/slugs/installing-ruby-1-8-and-2-3-8-for-activesalesforce.jpg'
tags:   ["2011", "public"]
---
<p>I've been working for the past week or two on my <a href="/2010/12/30/learning-ruby-for-force-com-developers-part-1/">Ruby for Force.com Developers</a> series but have run into a few snags. First of all the <a href="http://activesfdc.rubyforge.org/">ActiveSalesforce</a> adapter doesn't work with Rails 3.0.3. There's a <a href="http://forums.sforce.com/t5/Perl-PHP-Python-Ruby-Development/asf-soap-adapter-issue-with-Ruby-On-Rails-3-0-3/td-p/241397">post on the message boards</a> where Quinton Wall mentions that he is working with Heroku and is looking to write a new Ruby toolkit. Any new toolkit will be REST-based and move away from the active-record model but no ETA as of now.</p>
<p>So my other alternative was to go the REST route since I've <a href="/2010/12/17/salesforce-rest-api-demo-from-cloudstock/">already done it in Java</a>. Pat Patterson has a <a href="http://developer.force.com/cookbook/recipe/interact-with-the-forcecom-rest-api-from-ruby">great Cookbook Recipe</a> but it uses the <a href="http://www.sinatrarb.com/">Sinatra framework</a> and has confusing instruction on setting up na SSL reverse proxy with different HTTP servers. <a href="http://www.nearinfinity.com/blogs/chris_rohr/configuring_webrick_to_use_ssl.html">Setting up SSL with Rails 3.0.3</a> is a breeze and since my Ruby series is already headed down that path, I decided to stick with Rails. I quickly spun up a new Rails app and started working on the OAuth dance. I had no problems authorizing my app with salesforce.com and returning the code, however, when trying to POST to salesforce.com to get my token, I received a mysterious "end of file" error. Based upon the <a href="http://forums.sforce.com/t5/Perl-PHP-Python-Ruby-Development/bd-p/PerlDevelopment">Ruby message boards</a>, a number of people are having struggles with OAuth so I enlisted Quinton to see if he can help me. Hopefully we'll have a Rails 3 solution soon and I can add that to my developer series.</p>
<p><strong>Note</strong>: We had an Appirio AppDev CoE call with <a href="http://twitter.com/#!/bscofield">Ben Scofield</a> (Heroku's developer advocate) last week and he suggested rolling a solution with <a href="https://github.com/intridea/omniauth">OmniAuth</a>. I think we are going to post a <a href="http://www.cloudspokes.com">CloudSpokes</a> contest to build this out for everyone.</p>
<p>So I decided to downgrade to an earlier version of Ruby and Rails so that I could use ActiveSalesforce for my developer series. I ended up (finally!) installing Ruby 1.8.7 and Rails 2.3.8 on a Ubuntu 10.10 VM. I think I could have used Ruby 1.9.2 but was caught in version hell. There are a couple of conflicting articles on how to setup your Rails environment (<a href="http://blog.sforce.com/sforce/2010/12/setting-up-your-ruby-on-rails-environment-for-forcecom-.html">this one</a> seems to be the best) but I finally got it working with a little help from the <a href="http://groups.google.com/group/activesalesforce/browse_thread/thread/bb91b33da78c14a">ActiveSalesforce Google Group</a>.</p>
<p>Here are the steps that I went through on a fresh install of Ubuntu:</p>
<p><span style="font-family: 'Lucida Console';">apt-get install ruby-full</span><br /><br /><span style="font-family: 'Lucida Console';">wget production.cf.rubygems.org/rubygems/rubygems-1.3.7.tgz</span><br /><br /><span style="font-family: 'Lucida Console';">tar -xvf rubygems-1.3.7.tgz</span><br /><br /><span style="font-family: 'Lucida Console';">cd rubygems-1.3.7/</span><br /><br /><span style="font-family: 'Lucida Console';">ruby setup.rb</span><br /><br /><span style="font-family: 'Lucida Console';">ln -s /usr/bin/gem1.8 /usr/bin/gem</span><br /><br /><span style="font-family: 'Lucida Console';">gem install rdoc</span><br /><br /># install the 2.3.8 version of rails<br /><span style="font-family: 'Lucida Console';">gem install --version=2.3.8 rails --include-dependencies</span><br /><br /># install sqlite dev lib<br /><span style="font-family: 'Lucida Console';">apt-get install libsqlite3-dev</span><br /><br /># install rubygem<br /><span style="font-family: 'Lucida Console';">apt-get install rubygems</span><br /><br /># install bundler<br /><span style="font-family: 'Lucida Console';">gem install Bundler</span><br /><br /># install sqlite3<br /><span style="font-family: 'Lucida Console';">gem install sqlite3-ruby</span><br /><br /># install rake<br /><span style="font-family: 'Lucida Console';">gem install rake</span><br /><br /># install rforcedotcom<br /><span style="font-family: 'Lucida Console';">gem install rforcedotcom</span><br /><br /># install the older version of facets for toolkit<br /><span style="font-family: 'Lucida Console';">gem install -v=2.8.4 facets</span><br /><br /># install hpricot<br /><span style="font-family: 'Lucida Console';">gem install hpricot </span><br /><br /># install the soap adapter<br /><span style="font-family: 'Lucida Console';">gem install asf-soap-adapter</span></p>
